(this["webpackJsonpcard-capture"]=this["webpackJsonpcard-capture"]||[]).push([[0],{15:function(e,t,a){},17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),c=a.n(i),u=(a(15),a(5)),s=(a(16),a(9)),o=(a(17),a(3)),h=a(4),d=a(2),l=function(){function e(t){Object(o.a)(this,e),this.name=t}return Object(h.a)(e,[{key:"toString",value:function(){return"".concat(this.name)}}]),e}();l.Diamonds=new l("Diamonds"),l.Hearts=new l("Hearts"),l.Spades=new l("Spades"),l.Clubs=new l("Clubs"),l.Joker=new l("Joker");var f=l,v=function(){function e(t){Object(o.a)(this,e),this.value=t}return Object(h.a)(e,[{key:"toString",value:function(){return"".concat(this.value)}}]),e}();v.None=new v(0),v.Ace=new v(14),v.Two=new v(2),v.Three=new v(3),v.Four=new v(4),v.Five=new v(5),v.Six=new v(6),v.Seven=new v(7),v.Eight=new v(8),v.Nine=new v(9),v.Ten=new v(10),v.Jack=new v(11),v.Queen=new v(12),v.King=new v(13);var y=v,p=function(){function e(t,a){Object(o.a)(this,e),this._suit=t,this._value=a}return Object(h.a)(e,[{key:"display",value:function(){return"".concat(this._value.toString()," of ").concat(this._suit.toString())}},{key:"isHigherThanOrEqualTo",value:function(e){return this._value.value>=e._value.value}},{key:"isTheSameValueAs",value:function(e){return this._value.value===e._value.value}},{key:"isTheSameSuitAs",value:function(e){return this._suit.name===e._suit.name}},{key:"isTheSameAs",value:function(e){return this.isTheSameSuitAs(e)&&this.isTheSameValueAs(e)}},{key:"copy",value:function(){return new e(this._suit,this._value)}}],[{key:"createCards",value:function(t){return[new e(t,y.Ace),new e(t,y.Two),new e(t,y.Three),new e(t,y.Four),new e(t,y.Five),new e(t,y.Six),new e(t,y.Seven),new e(t,y.Eight),new e(t,y.Nine),new e(t,y.Ten),new e(t,y.Jack),new e(t,y.Queen),new e(t,y.King)]}},{key:"fromDisplay",value:function(t){var a=t.split(" "),n=new f(a[2]);return new e(n,n.name===f.Joker.name?new y(a[0]):new y(parseInt(a[0])))}}]),e}();p.Joker=new p(f.Joker,y.None),p.JokerA=new p(f.Joker,new y("COLOR")),p.JokerB=new p(f.Joker,new y("GREY")),p.Jack=new p(f.Joker,y.Jack);var k=p,b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Object(o.a)(this,e),this._cards=[],null===t){var a=k.createCards(f.Hearts),n=k.createCards(f.Spades),r=k.createCards(f.Clubs),i=k.createCards(f.Diamonds),c=[k.Joker,k.Joker];this._cards=[].concat(Object(d.a)(a),Object(d.a)(n),Object(d.a)(r),Object(d.a)(i),c),this.shuffle()}else this._cards=Object(d.a)(t)}return Object(h.a)(e,[{key:"shuffle",value:function(){for(var e=this._cards.length-1;e>0;e--){var t=Math.floor(Math.random()*(e+1)),a=[this._cards[t],this._cards[e]];this._cards[e]=a[0],this._cards[t]=a[1]}}},{key:"calculateCurrentSize",value:function(){return this._cards.length}},{key:"draw",value:function(){return this._cards.pop()}},{key:"peek",value:function(e){return this._cards[0].display()}},{key:"putAtTheBottom",value:function(e){this._cards.unshift(e)}}],[{key:"_setupCardCaptureDungeon",value:function(){var t=[];return[f.Hearts,f.Diamonds,f.Spades,f.Clubs].forEach((function(e){t.push(new k(e,y.Five)),t.push(new k(e,y.Six)),t.push(new k(e,y.Seven)),t.push(new k(e,y.Eight)),t.push(new k(e,y.Nine)),t.push(new k(e,y.Ten)),t.push(new k(e,y.Jack)),t.push(new k(e,y.Queen)),t.push(new k(e,y.King)),t.push(new k(e,y.Ace))})),new e(t)}},{key:"_setupCardCaptureDeck",value:function(){var t=[];[f.Hearts,f.Diamonds,f.Spades,f.Clubs].forEach((function(e){t.push(new k(e,y.Two)),t.push(new k(e,y.Three)),t.push(new k(e,y.Four))})),t.push(k.JokerA),t.push(k.JokerB);var a=new e(t);return a.shuffle(),a}}]),e}();b.CardCaptureDungeon=b._setupCardCaptureDungeon(),b.CardCaptureDeck=b._setupCardCaptureDeck();var _=b,j=function(){function e(){var t=this;Object(o.a)(this,e),this._hand=[],this._discard=[],this._discardFn=function(e){t._discard=[].concat(Object(d.a)(t._discard),[e]);var a=t._hand.findIndex((function(t){return e.isTheSameAs(t)}));t._hand.splice(a,1)},this._destroyFn=function(e){var a=t._hand.findIndex((function(t){return e.isTheSameAs(t)}));t._hand.splice(a,1)},this._deck=_.CardCaptureDeck}return Object(h.a)(e,[{key:"draw",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0;t<e;t++)0===this._deck.calculateCurrentSize()&&this.shuffleDiscardIntoDeck(),this._hand=[].concat(Object(d.a)(this._hand),[this._deck.draw()])}},{key:"discard",value:function(e){e.forEach(this._discardFn)}},{key:"shuffleDiscardIntoDeck",value:function(){var e=this;this._discard.forEach((function(t){e._deck.putAtTheBottom(t)})),this._discard=[],this._deck.shuffle()}},{key:"calculateHandSize",value:function(){return this._hand.length}},{key:"calculateDeckSice",value:function(){return this._deck.calculateCurrentSize()}},{key:"displayHand",value:function(){return Object(d.a)(this._hand)}},{key:"displayDiscard",value:function(){return Object(d.a)(this._discard)}},{key:"buyFrom",value:function(e,t,a,n){a.removeAt(t),this._discard=[].concat(Object(d.a)(this._discard),[e]),n.forEach(this._discardFn)}},{key:"sacrifice",value:function(e,t){e.bury(t),t.forEach(this._destroyFn)}},{key:"suffer",value:function(e,t){e.bury(t),t.forEach(this._destroyFn)}}]),e}(),m=function(){function e(){Object(o.a)(this,e),this._deadCards=[]}return Object(h.a)(e,[{key:"bury",value:function(e){this._deadCards=[].concat(Object(d.a)(this._deadCards),Object(d.a)(e)),this._deadCards.forEach((function(e){if(e.isHigherThanOrEqualTo(k.Jack))throw new Error("You lose")}))}},{key:"calculateSize",value:function(){return this._deadCards.length}}]),e}(),g=function(){function e(){Object(o.a)(this,e)}return Object(h.a)(e,[{key:"display",value:function(){return{first:this.first,second:this.second,third:this.third,fourth:this.fourth}}},{key:"removeAt",value:function(e){this[e]=void 0}},{key:"placeFirst",value:function(e){this.first=e}},{key:"placeSecond",value:function(e){this.second=e}},{key:"placeThird",value:function(e){this.third=e}},{key:"placeFourth",value:function(e){this.fourth=e}},{key:"isFull",value:function(){return void 0!==this.first&&(void 0!==this.second&&(void 0!==this.third&&void 0!==this.fourth))}},{key:"advance",value:function(e){this.isFull()||(void 0===this.fourth&&void 0!==this.third&&(this.placeFourth(this.third.copy()),this.removeAt("third")),void 0===this.third&&void 0!==this.second&&(this.placeThird(this.second.copy()),this.removeAt("second")),void 0===this.second&&void 0!==this.first&&(this.placeSecond(this.first.copy()),this.removeAt("first")),void 0===this.first&&this.placeFirst(e))}}]),e}(),O=function(){function e(){Object(o.a)(this,e)}return Object(h.a)(e,null,[{key:"areHigherValueThan",value:function(t,a){var n=0;return e._replaceJokers(t).forEach((function(e){n+=e._value.value})),n>=a._value.value}},{key:"areTheSameSuitAs",value:function(t,a){for(var n=0;n<t.length;n++)if(e._isNotTheSameSuitAsTheOtherCardButNotAJoker(t[n],a))return!1;return!0}},{key:"_isNotTheSameSuitAsTheOtherCardButNotAJoker",value:function(e,t){return!e.isTheSameSuitAs(k.Joker)&&!e.isTheSameSuitAs(t)}},{key:"_replaceJokers",value:function(t){var a=Object(d.a)(t),n=a.findIndex((function(e){return e.isTheSameAs(k.JokerA)}));if(n>=0){a.splice(n,1);var r=e.findHighestValue(a);a=[].concat(Object(d.a)(a),[r])}var i=a.findIndex((function(e){return e.isTheSameAs(k.JokerB)}));if(i>=0){a.splice(i,1);var c=e.findHighestValue(a);a=[].concat(Object(d.a)(a),[c])}return a}},{key:"findHighestValue",value:function(e){for(var t=void 0,a=0;a<e.length;a++)if(0===a)t=e[0];else{var n=e[a];n.isHigherThanOrEqualTo(t)&&(t=n)}return t}}]),e}(),w=function(){function e(){Object(o.a)(this,e),this._player=new j,this._dungeon=new _,this._courtyard=new g,this._graveyard=new m}return Object(h.a)(e,[{key:"displayPlayerHand",value:function(){return this._player.displayHand()}},{key:"displayDeckSize",value:function(){return this._player.calculateDeckSice()}},{key:"displayDiscard",value:function(){return this._player.displayDiscard()}},{key:"displayCourtyard",value:function(){return this._courtyard.display()}},{key:"displayGraveyard",value:function(){return this._graveyard.calculateSize()}},{key:"letPlayerSuffer",value:function(e){if(1!==e.length)throw new Error("You must suffer one card");var t=e.map(k.fromDisplay),a=this._courtyard.fourth.copy();this._player.suffer(this._graveyard,t),this._graveyard.bury([a]),this._courtyard.removeAt("fourth")}},{key:"letPlayerSacrifice",value:function(e,t){if(2!==e.length)throw new Error("You must sacrifice two cards");var a=e.map(k.fromDisplay),n=this._courtyard[t].copy();this._player.sacrifice(this._graveyard,a),this._dungeon.putAtTheBottom(n),this._courtyard.removeAt(t)}},{key:"fillPlayersHand",value:function(){for(;this._player.calculateHandSize()<4;)this._player.draw()}},{key:"letPlayerDrawFromDeck",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._player.draw(e)}},{key:"letPlayerDiscard",value:function(e){var t=e.map(k.fromDisplay);this._player.discard(t)}},{key:"letPlayerAttackWith",value:function(e,t){var a=e.map(k.fromDisplay),n=this._courtyard[t];if(!O.areHigherValueThan(a,n)||!O.areTheSameSuitAs(a,n))throw new Error("You cannot buy this scrub");this._player.buyFrom(n,t,this._courtyard,a)}},{key:"setupCardCapture",value:function(){this._setupDungeon(),this._setupCourtyard(),this.letPlayerDrawFromDeck(4)}},{key:"_setupDungeon",value:function(){this._dungeon=_.CardCaptureDungeon,this._dungeon.shuffle()}},{key:"_setupCourtyard",value:function(){var e=this._dungeon.draw(),t=this._dungeon.draw(),a=this._dungeon.draw(),n=this._dungeon.draw();for(this._courtyard.placeFirst(e),this._courtyard.placeSecond(t),this._courtyard.placeThird(a),this._courtyard.placeFourth(n),this._checkForMaximumInCourtyard();!1===this._courtyard.isFull();)this.advanceDungeon()}},{key:"advanceDungeon",value:function(){this._courtyard.advance(this._dungeon.draw())}},{key:"_checkForMaximumInCourtyard",value:function(){var e=new k(f.Hearts,y.Jack),t=this._courtyard.first.copy(),a=this._courtyard.second.copy(),n=this._courtyard.third.copy(),r=this._courtyard.fourth.copy();t.isHigherThanOrEqualTo(e)&&(this._dungeon.putAtTheBottom(t),this._courtyard.removeAt("first")),a.isHigherThanOrEqualTo(e)&&(this._dungeon.putAtTheBottom(a),this._courtyard.removeAt("second")),n.isHigherThanOrEqualTo(e)&&(this._dungeon.putAtTheBottom(n),this._courtyard.removeAt("third")),r.isHigherThanOrEqualTo(e)&&(this._dungeon.putAtTheBottom(r),this._courtyard.removeAt("fourth"))}}],[{key:"_instantiateCardCapture",value:function(){var t=new e;return t.setupCardCapture(),t}}]),e}();w.CardCapture=w._instantiateCardCapture();var C=w,S=a(1),T={game:C.CardCapture},A={choices:new Set},D=function(){var e=Object(n.useState)(T),t=Object(s.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(),c=Object(s.a)(i,2),o=c[0],h=c[1],d=Object(n.useState)(A),l=Object(s.a)(d,2),f=l[0].choices,v=l[1],y=Object(n.useCallback)((function(){a.game.letPlayerDrawFromDeck(),r({game:a.game})}),[a]),p=Object(n.useCallback)((function(){a.game.fillPlayersHand(),r({game:a.game})}),[a]),k=Object(n.useCallback)((function(){a.game.letPlayerDiscard(Array.from(f.values())),r({game:a.game}),v({choices:new Set})}),[f,a]),b=Object(n.useCallback)((function(){try{a.game.letPlayerSuffer(Array.from(f.values())),v({choices:new Set})}catch(e){"You lose"===e.message?Object(u.b)("Y o U lO st :-("):u.b.warn(e.message)}r({game:a.game})}),[f,a]),_=Object(n.useCallback)((function(){try{a.game.letPlayerAttackWith(Array.from(f.values()),o),v({choices:new Set})}catch(e){"You lose"===e.message?Object(u.b)("Y o U lO st :-("):u.b.warn("You can't capture this one...")}r({game:a.game})}),[o,f,a]),j=Object(n.useCallback)((function(){try{a.game.letPlayerSacrifice(Array.from(f.values()),o),v({choices:new Set})}catch(e){"You lose"===e.message?Object(u.b)("Y o U lO st :-("):u.b.warn(e.message)}r({game:a.game})}),[o,f,a]),m=Object(n.useCallback)((function(){a.game.advanceDungeon(),r({game:a.game})}),[a]),g=Object(n.useCallback)((function(){return a.game.displayDeckSize()}),[a]),O=Object(n.useCallback)((function(){return a.game.displayPlayerHand()}),[a]),w=Object(n.useCallback)((function(){return a.game.displayDiscard()}),[a]),C=Object(n.useCallback)((function(){return Object.values(a.game.displayCourtyard())}),[a]),D=Object(n.useCallback)((function(){return a.game.displayGraveyard()}),[a]),x=["first","second","third","fourth"],F=Object(n.useCallback)((function(e){h(e.target.value)}),[]),J=Object(n.useCallback)((function(e){var t=e.target.value;e.target.checked?f.add(t):f.delete(t),v({choices:f})}),[f]);return Object(S.jsxs)("div",{className:"game",children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{children:"Hand"}),Object(S.jsx)("button",{onClick:y,children:"Draw"}),Object(S.jsx)("button",{onClick:p,children:"Fill"}),Object(S.jsx)("button",{onClick:k,children:"Discard"}),Object(S.jsxs)("p",{children:["Deck: ",g()]}),O().map((function(e,t){var a="h-".concat(e.display(),"-").concat(t);return Object(S.jsxs)("div",{children:[Object(S.jsx)("input",{onChange:J,value:e.display(),type:"checkbox"}),e.display()]},a)}))]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{children:"Discard"}),w().map((function(e,t){return Object(S.jsx)("div",{children:e.display()},"d".concat(t))}))]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{children:"Courtyard"}),Object(S.jsx)("button",{onClick:_,children:"Capture"}),Object(S.jsx)("button",{onClick:m,children:"Advance"}),Object(S.jsx)("button",{onClick:j,children:"Sacrifice"}),Object(S.jsx)("button",{onClick:b,children:"Suffer"}),Object(S.jsx)("div",{onChange:F,children:C().map((function(e,t){var a=void 0===e?"c-undefined-".concat(t):"c-".concat(e.display(),"-").concat(t);return void 0===e?Object(S.jsx)("div",{v:!0,children:"none"},a):Object(S.jsxs)("div",{children:[Object(S.jsx)("input",{name:"captured",value:x[t],type:"radio"}),e.display()]},a)}))})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{children:"Graveyard"}),Object(S.jsx)("p",{children:D()})]})]})};var x=function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)(D,{}),Object(S.jsx)(u.a,{})]})},F=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,20)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),i(e),c(e)}))};c.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(x,{})}),document.getElementById("root")),F()}},[[19,1,2]]]);
//# sourceMappingURL=main.4eec3534.chunk.js.map